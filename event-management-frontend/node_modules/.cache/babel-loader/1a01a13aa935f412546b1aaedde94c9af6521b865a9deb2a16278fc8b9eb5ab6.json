{"ast":null,"code":"import axios from 'axios';\nimport { debounce } from 'lodash';\nexport default {\n  data() {\n    return {\n      events: [],\n      searchQuery: '',\n      startDate: '',\n      endDate: '',\n      loading: false,\n      error: null,\n      isAtStart: true,\n      isAtEnd: false,\n      scrollProgress: 0\n    };\n  },\n  created() {\n    this.fetchEvents();\n    window.addEventListener('keydown', this.handleKeyboard);\n    // Debounced search\n    this.debouncedFetch = debounce(this.fetchEvents, 300);\n  },\n  destroyed() {\n    window.removeEventListener('keydown', this.handleKeyboard);\n  },\n  watch: {\n    searchQuery() {\n      this.debouncedFetch();\n    }\n  },\n  methods: {\n    async fetchEvents() {\n      this.loading = true;\n      this.error = null;\n      try {\n        const params = {\n          name: this.searchQuery,\n          startDate: this.startDate,\n          endDate: this.endDate\n        };\n        const response = await axios.get('http://localhost:3000/api/events', {\n          params,\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        this.events = response.data;\n      } catch (error) {\n        this.error = error.response?.data?.message || 'Error loading events. Please try again.';\n        console.error('Error fetching events:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    clearFilters() {\n      this.searchQuery = '';\n      this.startDate = '';\n      this.endDate = '';\n      this.fetchEvents();\n    },\n    formatDate(dateString) {\n      try {\n        const date = new Date(dateString);\n        return new Intl.DateTimeFormat('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        }).format(date);\n      } catch (error) {\n        console.error('Date formatting error:', error);\n        return dateString; // Fallback to original string\n      }\n    },\n    scrollEvents(direction) {\n      const container = this.$refs.eventContainer;\n      const scrollAmount = 320;\n      if (container) {\n        container.scrollBy({\n          left: direction === 'right' ? scrollAmount : -scrollAmount,\n          behavior: 'smooth'\n        });\n      }\n    },\n    handleMouseScroll(event) {\n      if (!event.shiftKey && Math.abs(event.deltaX) < Math.abs(event.deltaY)) {\n        return;\n      }\n      event.preventDefault();\n      const container = event.currentTarget;\n      const scrollAmount = 100;\n      container.scrollBy({\n        left: event.deltaY > 0 ? scrollAmount : -scrollAmount,\n        behavior: 'smooth'\n      });\n    },\n    handleKeyboard(event) {\n      if (event.key === 'ArrowLeft') {\n        this.scrollEvents('left');\n      } else if (event.key === 'ArrowRight') {\n        this.scrollEvents('right');\n      }\n    },\n    checkScrollPosition() {\n      const container = this.$refs.eventContainer;\n      if (!container) return;\n      const {\n        scrollLeft,\n        scrollWidth,\n        clientWidth\n      } = container;\n      this.isAtStart = scrollLeft <= 0;\n      this.isAtEnd = scrollLeft + clientWidth >= scrollWidth - 10;\n\n      // Calculate scroll progress\n      this.scrollProgress = scrollLeft / (scrollWidth - clientWidth) * 100;\n    },\n    handleImageError(event) {\n      event.target.src = 'http://localhost:3000/uploads/default-image.jpg';\n    }\n  }\n};","map":{"version":3,"names":["axios","debounce","data","events","searchQuery","startDate","endDate","loading","error","isAtStart","isAtEnd","scrollProgress","created","fetchEvents","window","addEventListener","handleKeyboard","debouncedFetch","destroyed","removeEventListener","watch","methods","params","name","response","get","headers","Authorization","localStorage","getItem","message","console","clearFilters","formatDate","dateString","date","Date","Intl","DateTimeFormat","year","month","day","format","scrollEvents","direction","container","$refs","eventContainer","scrollAmount","scrollBy","left","behavior","handleMouseScroll","event","shiftKey","Math","abs","deltaX","deltaY","preventDefault","currentTarget","key","checkScrollPosition","scrollLeft","scrollWidth","clientWidth","handleImageError","target","src"],"sources":["/Users/siddarthbandi/Desktop/SID/project/event-management-platform/event-management-frontend/src/components/EventListPublic.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-4\">\n    <h2 class=\"text-center mb-4\">Event List</h2>\n\n    <!-- Search Bar -->\n    <div class=\"mb-3\">\n      <input \n        v-model=\"searchQuery\" \n        class=\"form-control\" \n        placeholder=\"Search by name\" \n        @input=\"fetchEvents\" \n      />\n    </div>\n\n    <!-- Date Range Filter -->\n    <div class=\"d-flex justify-content-between mb-3\">\n      <div>\n        <label for=\"startDate\">Start Date:</label>\n        <input \n          type=\"date\" \n          v-model=\"startDate\" \n          class=\"form-control\" \n          @change=\"fetchEvents\" \n        />\n      </div>\n      <div>\n        <label for=\"endDate\">End Date:</label>\n        <input \n          type=\"date\" \n          v-model=\"endDate\" \n          class=\"form-control\" \n          @change=\"fetchEvents\" \n        />\n      </div>\n      <!-- Clear Filters Button -->\n      <div class=\"d-flex align-items-end\">\n        <button \n          @click=\"clearFilters\" \n          class=\"btn btn-outline-secondary\"\n        >\n          Clear Filters\n        </button>\n      </div>\n    </div>\n\n    <!-- Mouse Scroll Wrapper -->\n    <div class=\"mouse-scroll\">\n      <!-- Navigation Buttons -->\n      <div class=\"navigation-buttons\">\n        <button \n          @click=\"scrollEvents('left')\" \n          class=\"nav-btn\"\n          :disabled=\"isAtStart\"\n        >\n          ←\n        </button>\n        <button \n          @click=\"scrollEvents('right')\" \n          class=\"nav-btn\"\n          :disabled=\"isAtEnd\"\n        >\n          →\n        </button>\n      </div>\n\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"loading-state\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n          <span class=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"error-state\">\n        <div class=\"alert alert-danger\" role=\"alert\">\n          {{ error }}\n          <button @click=\"fetchEvents\" class=\"btn btn-outline-danger ms-3\">\n            Retry\n          </button>\n        </div>\n      </div>\n\n      <!-- No Results State -->\n      <div v-else-if=\"events.length === 0\" class=\"no-results-state\">\n        <div class=\"alert alert-info\" role=\"alert\">\n          No events found. Try adjusting your filters.\n        </div>\n      </div>\n\n      <!-- Events List -->\n      <div \n        v-else\n        ref=\"eventContainer\"\n        class=\"event-list-container\"\n        @wheel.prevent=\"handleMouseScroll\"\n        @scroll=\"checkScrollPosition\"\n      >\n        <div \n          v-for=\"event in events\" \n          :key=\"event.id\" \n          class=\"card h-100 event-card\"\n        >\n          <div class=\"card-img-wrapper\">\n            <img \n              :src=\"event.image ? `http://localhost:3000${event.image}` : 'http://localhost:3000/uploads/default-image.jpg'\" \n              :alt=\"event.name\" \n              class=\"card-img-top\"\n              @error=\"handleImageError\"\n            />\n          </div>\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ event.name }}</h5>\n            <p class=\"card-text\"><strong>Date:</strong> {{ formatDate(event.date) }}</p>\n            <router-link \n              :to=\"{ name: 'event-details-public', params: { id: event.id } }\" \n              class=\"btn btn-primary mt-3\"\n            >\n              View Details\n            </router-link>\n          </div>\n        </div>\n      </div>\n\n      <!-- Scroll Progress Indicator -->\n      <div class=\"scroll-progress\">\n        <div \n          class=\"progress-bar\" \n          :style=\"{ width: scrollProgress + '%' }\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { debounce } from 'lodash';\n\nexport default {\n  data() {\n    return {\n      events: [],\n      searchQuery: '',\n      startDate: '',\n      endDate: '',\n      loading: false,\n      error: null,\n      isAtStart: true,\n      isAtEnd: false,\n      scrollProgress: 0\n    };\n  },\n  created() {\n    this.fetchEvents();\n    window.addEventListener('keydown', this.handleKeyboard);\n    // Debounced search\n    this.debouncedFetch = debounce(this.fetchEvents, 300);\n  },\n  destroyed() {\n    window.removeEventListener('keydown', this.handleKeyboard);\n  },\n  watch: {\n    searchQuery() {\n      this.debouncedFetch();\n    }\n  },\n  methods: {\n    async fetchEvents() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        const params = {\n          name: this.searchQuery,\n          startDate: this.startDate,\n          endDate: this.endDate\n        };\n        \n        const response = await axios.get('http://localhost:3000/api/events', {\n          params,\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        \n        this.events = response.data;\n      } catch (error) {\n        this.error = error.response?.data?.message || 'Error loading events. Please try again.';\n        console.error('Error fetching events:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    clearFilters() {\n      this.searchQuery = '';\n      this.startDate = '';\n      this.endDate = '';\n      this.fetchEvents();\n    },\n    formatDate(dateString) {\n      try {\n        const date = new Date(dateString);\n        return new Intl.DateTimeFormat('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        }).format(date);\n      } catch (error) {\n        console.error('Date formatting error:', error);\n        return dateString; // Fallback to original string\n      }\n    },\n    scrollEvents(direction) {\n      const container = this.$refs.eventContainer;\n      const scrollAmount = 320;\n      \n      if (container) {\n        container.scrollBy({\n          left: direction === 'right' ? scrollAmount : -scrollAmount,\n          behavior: 'smooth'\n        });\n      }\n    },\n    handleMouseScroll(event) {\n      if (!event.shiftKey && Math.abs(event.deltaX) < Math.abs(event.deltaY)) {\n        return;\n      }\n      \n      event.preventDefault();\n      const container = event.currentTarget;\n      const scrollAmount = 100;\n      \n      container.scrollBy({\n        left: event.deltaY > 0 ? scrollAmount : -scrollAmount,\n        behavior: 'smooth'\n      });\n    },\n    handleKeyboard(event) {\n      if (event.key === 'ArrowLeft') {\n        this.scrollEvents('left');\n      } else if (event.key === 'ArrowRight') {\n        this.scrollEvents('right');\n      }\n    },\n    checkScrollPosition() {\n      const container = this.$refs.eventContainer;\n      if (!container) return;\n\n      const { scrollLeft, scrollWidth, clientWidth } = container;\n      this.isAtStart = scrollLeft <= 0;\n      this.isAtEnd = scrollLeft + clientWidth >= scrollWidth - 10;\n      \n      // Calculate scroll progress\n      this.scrollProgress = (scrollLeft / (scrollWidth - clientWidth)) * 100;\n    },\n    handleImageError(event) {\n      event.target.src = 'http://localhost:3000/uploads/default-image.jpg';\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Previous styles remain the same */\n\n/* New and updated styles */\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 200px;\n}\n\n.error-state {\n  padding: 20px;\n}\n\n.no-results-state {\n  padding: 20px;\n  text-align: center;\n}\n\n.nav-btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.scroll-progress {\n  height: 4px;\n  background-color: #eee;\n  margin-top: 10px;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.progress-bar {\n  height: 100%;\n  background-color: #007bff;\n  transition: width 0.3s ease;\n}\n\n.card-img-wrapper {\n  position: relative;\n  overflow: hidden;\n  padding-top: 66.67%; /* 3:2 Aspect Ratio */\n}\n\n.card-img-top {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  margin: 0;\n}\n\n/* Animation for loading state */\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.event-card {\n  animation: fadeIn 0.3s ease-in;\n}\n\n/* Hover effects */\n.card {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0,0,0,0.2);\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n  .navigation-buttons {\n    position: sticky;\n    top: 0;\n    background: white;\n    z-index: 1;\n    padding: 10px;\n  }\n  \n  .event-card {\n    width: 280px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}