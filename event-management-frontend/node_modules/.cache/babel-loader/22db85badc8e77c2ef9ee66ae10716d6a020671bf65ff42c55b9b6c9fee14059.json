{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport { createRouter, createWebHistory } from 'vue-router';\nimport EventListPublic from './components/EventListPublic.vue'; // Import the public event list component\nimport EventList from './components/EventList.vue';\nimport EditEvent from './components/EditEvent.vue';\nimport Login from './components/Login.vue'; // Login component\nimport Register from './components/Register.vue'; // Register component\nimport EventDetails from './components/EventDetails.vue'; // Import EventDetails component\nimport UserDashboard from './components/UserDashboard.vue'; // User Dashboard component\nimport OrganizeEvents from './components/OrganizeEvents.vue'; // Organizer page component\nimport Toast from 'vue-toastification';\nimport 'vue-toastification/dist/index.css';\n\n// Define the routes\nconst routes = [{\n  path: '/',\n  component: EventListPublic\n},\n// Public event list page\n{\n  path: '/login',\n  component: Login,\n  name: 'login'\n},\n// Login route\n{\n  path: '/register',\n  component: Register,\n  name: 'register'\n},\n// Register route\n{\n  path: '/dashboard',\n  component: UserDashboard,\n  meta: {\n    requiresAuth: true\n  }\n},\n// User dashboard, protected\n{\n  path: '/events',\n  component: EventList,\n  name: 'events',\n  meta: {\n    requiresAuth: true\n  }\n},\n// EventList route, protected\n{\n  path: '/organize',\n  component: OrganizeEvents,\n  meta: {\n    requiresAuth: true,\n    role: 'organizer'\n  }\n},\n// Organizer page, role-based access\n{\n  path: '/events/:id/edit',\n  component: EditEvent,\n  name: 'edit-event',\n  props: true,\n  meta: {\n    requiresAuth: true\n  }\n},\n// Edit event\n{\n  path: '/events/:id',\n  component: EventDetails,\n  name: 'event-details',\n  props: true,\n  meta: {\n    requiresAuth: true\n  }\n}];\n\n// Create the router\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nconst app = createApp(App);\n\n// Use the Toastification plugin\napp.use(Toast, {\n  timeout: 3000,\n  // Set timeout for 3 seconds\n  position: 'top-right' // Set the position of the toast\n});\n\n// Add a navigation guard to protect routes and enforce role-based access\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('token');\n  const role = localStorage.getItem('role'); // Get role from localStorage\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      next({\n        name: 'login'\n      });\n    } else if (to.matched.some(record => record.meta.role === 'organizer' && role !== 'organizer' && role !== 'admin')) {\n      next(false); // Deny access if user is not an organizer or admin\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\n\n// Mount the app\napp.use(router);\napp.mount('#app');","map":{"version":3,"names":["createApp","App","createRouter","createWebHistory","EventListPublic","EventList","EditEvent","Login","Register","EventDetails","UserDashboard","OrganizeEvents","Toast","routes","path","component","name","meta","requiresAuth","role","props","router","history","app","use","timeout","position","beforeEach","to","from","next","token","localStorage","getItem","matched","some","record","mount"],"sources":["/Users/siddarthbandi/Desktop/SID/project/event-management-platform/event-management-frontend/src/main.js"],"sourcesContent":["import { createApp } from 'vue';\nimport App from './App.vue';\nimport { createRouter, createWebHistory } from 'vue-router';\nimport EventListPublic from './components/EventListPublic.vue'; // Import the public event list component\nimport EventList from './components/EventList.vue';\nimport EditEvent from './components/EditEvent.vue';\nimport Login from './components/Login.vue';   // Login component\nimport Register from './components/Register.vue'; // Register component\nimport EventDetails from './components/EventDetails.vue';  // Import EventDetails component\nimport UserDashboard from './components/UserDashboard.vue'; // User Dashboard component\nimport OrganizeEvents from './components/OrganizeEvents.vue'; // Organizer page component\nimport Toast from 'vue-toastification';\nimport 'vue-toastification/dist/index.css';\n\n// Define the routes\nconst routes = [\n  { path: '/', component: EventListPublic }, // Public event list page\n  { path: '/login', component: Login, name: 'login' },  // Login route\n  { path: '/register', component: Register, name: 'register' }, // Register route\n  { path: '/dashboard', component: UserDashboard, meta: { requiresAuth: true } },  // User dashboard, protected\n  { path: '/events', component: EventList, name: 'events', meta: { requiresAuth: true } },  // EventList route, protected\n  { path: '/organize', component: OrganizeEvents, meta: { requiresAuth: true, role: 'organizer' } }, // Organizer page, role-based access\n  { path: '/events/:id/edit', component: EditEvent, name: 'edit-event', props: true, meta: { requiresAuth: true } }, // Edit event\n  { path: '/events/:id', component: EventDetails, name: 'event-details', props: true, meta: { requiresAuth: true } }\n];\n\n// Create the router\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\nconst app = createApp(App);\n\n// Use the Toastification plugin\napp.use(Toast, {\n    timeout: 3000, // Set timeout for 3 seconds\n    position: 'top-right' // Set the position of the toast\n});\n\n// Add a navigation guard to protect routes and enforce role-based access\nrouter.beforeEach((to, from, next) => {\n    const token = localStorage.getItem('token');\n    const role = localStorage.getItem('role'); // Get role from localStorage\n  \n    if (to.matched.some(record => record.meta.requiresAuth)) {\n      if (!token) {\n        next({ name: 'login' });\n      } else if (to.matched.some(record => record.meta.role === 'organizer' && role !== 'organizer' && role !== 'admin')) {\n        next(false);  // Deny access if user is not an organizer or admin\n      } else {\n        next();\n      }\n    } else {\n      next();\n    }\n  });\n  \n\n// Mount the app\napp.use(router);\napp.mount('#app');\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}