(function(){"use strict";var e={6983:function(e,t,n){var r=n(3751),o=n(641);const a={id:"app"};function s(e,t,n,r,s,i){const l=(0,o.g2)("router-link"),u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("nav",null,[i.isLoggedIn?((0,o.uX)(),(0,o.Wv)(l,{key:0,to:"/events"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Events ")]))),_:1})):(0,o.Q3)("",!0),i.isLoggedIn?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e))},"Logout")):(0,o.Q3)("",!0)]),(0,o.bF)(u)])}n(4114);var i={name:"App",computed:{isLoggedIn(){return!!localStorage.getItem("token")}},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("userEmail"),localStorage.removeItem("userId"),this.$router.push("/login"),alert("You have successfully logged out!")}}},l=n(6262);const u=(0,l.A)(i,[["render",s]]);var d=u,c=n(6166),v=n(33);const h=["onClick"],p=["onClick"];function m(e,t,n,a,s,i){const l=(0,o.g2)("CreateEvent"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[t[9]||(t[9]=(0,o.Lk)("h2",null,"Event List",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchQuery=e),placeholder:"Search by name",onInput:t[1]||(t[1]=(...e)=>i.fetchEvents&&i.fetchEvents(...e))},null,544),[[r.Jo,s.searchQuery]]),(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"startDate"},"Start Date:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.startDate=e),onChange:t[3]||(t[3]=(...e)=>i.fetchEvents&&i.fetchEvents(...e))},null,544),[[r.Jo,s.startDate]]),t[8]||(t[8]=(0,o.Lk)("label",{for:"endDate"},"End Date:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>s.endDate=e),onChange:t[5]||(t[5]=(...e)=>i.fetchEvents&&i.fetchEvents(...e))},null,544),[[r.Jo,s.endDate]])]),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.clearFilters&&i.clearFilters(...e))},"Clear Filters"),(0,o.bF)(l,{onEventCreated:i.refreshEvents},null,8,["onEventCreated"]),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.events,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.bF)(u,{to:{name:"event-details",params:{id:e.id}}},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.name)+" - "+(0,v.v_)(i.formatDate(e.date)),1)])),_:2},1032,["to"]),(0,o.Lk)("button",{onClick:t=>i.editEvent(e.id)},"Edit",8,h),(0,o.Lk)("button",{onClick:t=>i.deleteEvent(e.id)},"Delete",8,p)])))),128))])])}var g=n(4335);function f(e,t,n,a,s,i){return(0,o.uX)(),(0,o.CE)("div",null,[t[8]||(t[8]=(0,o.Lk)("h2",null,"Create a New Event",-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>i.createEvent&&i.createEvent(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",{for:"name"},"Event Name:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.event.name=e),id:"name",required:""},null,512),[[r.Jo,s.event.name]])]),(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("label",{for:"description"},"Description:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.event.description=e),id:"description"},null,512),[[r.Jo,s.event.description]])]),(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"date"},"Date:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.event.date=e),id:"date",required:""},null,512),[[r.Jo,s.event.date]])]),t[7]||(t[7]=(0,o.Lk)("button",{type:"submit"},"Create Event",-1))],32)])}var k={data(){return{event:{name:"",description:"",date:""}}},methods:{createEvent(){const e=localStorage.getItem("token");g.A.post("http://localhost:3000/api/events",this.event,{headers:{Authorization:`Bearer ${e}`}}).then((e=>{console.log("Event created:",e.data),this.$emit("event-created",e.data),this.resetForm()})).catch((e=>{console.error("Error creating event:",e),alert("Failed to create event. Please make sure you are logged in.")}))},resetForm(){this.event={name:"",description:"",date:""}}}};const L=(0,l.A)(k,[["render",f]]);var E=L,b={components:{CreateEvent:E},data(){return{events:[],searchQuery:"",startDate:"",endDate:""}},created(){this.refreshEvents()},methods:{fetchEvents(){const e={name:this.searchQuery,startDate:this.startDate,endDate:this.endDate};g.A.get("http://localhost:3000/api/events",{params:e,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.events=e.data,this.$toast.success("Events loaded successfully!")})).catch((e=>{console.error("Error fetching events:",e),this.$toast.error("Failed to fetch events.")}))},clearFilters(){this.searchQuery="",this.startDate="",this.endDate="",this.fetchEvents(),this.$toast.success("Filters cleared.")},refreshEvents(){g.A.get("http://localhost:3000/api/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.events=e.data})).catch((e=>{console.error("Error fetching events:",e),this.$toast.error("Failed to refresh events.")}))},formatDate(e){const t=new Date(e);return t.toISOString().split("T")[0]},editEvent(e){this.$router.push({name:"edit-event",params:{id:e}})},deleteEvent(e){confirm("Are you sure you want to delete this event?")&&g.A.delete(`http://localhost:3000/api/events/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.refreshEvents(),this.$toast.success("Event deleted successfully!")})).catch((e=>{console.error("Error deleting event:",e),this.$toast.error("Failed to delete event.")}))}}};const y=(0,l.A)(b,[["render",m]]);var D=y;const w={key:0},S={key:1},A={key:0};function $(e,t,n,a,s,i){return s.event?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("h2",null,"Edit Event: "+(0,v.v_)(s.event.name),1),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>i.updateEvent&&i.updateEvent(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",{for:"name"},"Event Name:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.event.name=e),id:"name",required:""},null,512),[[r.Jo,s.event.name]])]),(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("label",{for:"description"},"Description:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.event.description=e),id:"description"},null,512),[[r.Jo,s.event.description]])]),(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"date"},"Date:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.formattedDate=e),id:"date",required:""},null,512),[[r.Jo,s.formattedDate]])]),t[7]||(t[7]=(0,o.Lk)("button",{type:"submit"},"Update Event",-1))],32)])):((0,o.uX)(),(0,o.CE)("div",S,[s.errorMessage?((0,o.uX)(),(0,o.CE)("p",A,(0,v.v_)(s.errorMessage),1)):(0,o.Q3)("",!0),t[8]||(t[8]=(0,o.Lk)("p",null,"Loading event data...",-1))]))}var C={props:["id"],data(){return{event:null,formattedDate:"",errorMessage:""}},created(){this.fetchEvent()},methods:{fetchEvent(){g.A.get(`http://localhost:3000/api/events/${this.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.event=e.data,this.formattedDate=this.formatDate(this.event.date)})).catch((()=>{this.$toast.error("Failed to load event data.")}))},formatDate(e){const t=new Date(e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return`${n}-${r}-${o}`},updateEvent(){this.event.date=this.formattedDate,g.A.put(`http://localhost:3000/api/events/${this.id}`,this.event,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.$toast.success("Event updated successfully!"),this.$router.push("/events")})).catch((()=>{this.$toast.error("Failed to update the event.")}))}}};const I=(0,l.A)(C,[["render",$],["__scopeId","data-v-0e446118"]]);var F=I;function _(e,t,n,a,s,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[t[8]||(t[8]=(0,o.Lk)("h2",null,"Sign In",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[3]||(t[3]=(0,o.Lk)("label",{for:"email"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),id:"email",required:""},null,512),[[r.Jo,s.email]])]),(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),id:"password",required:""},null,512),[[r.Jo,s.password]])]),t[5]||(t[5]=(0,o.Lk)("button",{type:"submit"},"Login",-1))],32),(0,o.Lk)("p",null,[t[7]||(t[7]=(0,o.eW)("Don't have an account? ")),(0,o.bF)(l,{to:"/register"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Sign Up")]))),_:1})])])}var U={name:"LoginPage",data(){return{email:"",password:""}},methods:{async login(){try{const e=await g.A.post("http://localhost:3000/api/auth/login",{email:this.email,password:this.password}),t=e.data.token;console.log("Token:",localStorage.getItem("token")),localStorage.setItem("token",t),alert("Login successful!"),this.$router.push("/events")}catch(e){e.response&&400===e.response.status?alert("Invalid credentials. Please check your email and password."):(console.error("Login error:",e),alert("An error occurred during login. Please try again."))}}}};const O=(0,l.A)(U,[["render",_]]);var X=O;function J(e,t,n,a,s,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[t[8]||(t[8]=(0,o.Lk)("h2",null,"Sign Up",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>i.register&&i.register(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[3]||(t[3]=(0,o.Lk)("label",{for:"email"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),id:"email",required:""},null,512),[[r.Jo,s.email]])]),(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),id:"password",required:""},null,512),[[r.Jo,s.password]])]),t[5]||(t[5]=(0,o.Lk)("button",{type:"submit"},"Register",-1))],32),(0,o.Lk)("p",null,[t[7]||(t[7]=(0,o.eW)("Already have an account? ")),(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Sign In")]))),_:1})])])}var V={name:"RegisterPage",data(){return{email:"",password:""}},methods:{async register(){try{console.log("Email:",this.email),console.log("Password:",this.password),await g.A.post("http://localhost:3000/api/auth/register",{email:this.email,password:this.password}),alert("Registration successful! Redirecting to login..."),this.$router.push("/login")}catch(e){console.error("Registration error:",e),alert("Registration failed, please try again.")}}}};const q=(0,l.A)(V,[["render",J]]);var P=q;const x={key:0},W={key:1};function j(e,t,n,r,a,s){return a.event?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("h2",null,(0,v.v_)(a.event.name),1),(0,o.Lk)("p",null,[t[0]||(t[0]=(0,o.Lk)("strong",null,"Description:",-1)),(0,o.eW)(" "+(0,v.v_)(a.event.description),1)]),(0,o.Lk)("p",null,[t[1]||(t[1]=(0,o.Lk)("strong",null,"Date:",-1)),(0,o.eW)(" "+(0,v.v_)(s.formatDate(a.event.date)),1)])])):((0,o.uX)(),(0,o.CE)("div",W,t[2]||(t[2]=[(0,o.Lk)("p",null,"Loading event details...",-1)])))}var M={props:["id"],data(){return{event:null,errorMessage:""}},created(){this.fetchEventDetails()},methods:{fetchEventDetails(){g.A.get(`http://localhost:3000/api/events/${this.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.event=e.data})).catch((e=>{console.error("Error fetching event details:",e),this.errorMessage="Failed to load event details."}))},formatDate(e){const t=new Date(e);return t.toISOString().split("T")[0]}}};const Q=(0,l.A)(M,[["render",j],["__scopeId","data-v-33371bd2"]]);var z=Q,B=n(5246);n(7917);const T=[{path:"/",redirect:{name:"login"}},{path:"/login",component:X,name:"login"},{path:"/register",component:P,name:"register"},{path:"/events",component:D,name:"events",meta:{requiresAuth:!0}},{path:"/events/:id/edit",component:F,name:"edit-event",props:!0,meta:{requiresAuth:!0}},{path:"/events/:id",component:z,name:"event-details",props:!0,meta:{requiresAuth:!0}}],R=(0,c.aE)({history:(0,c.LA)(),routes:T}),N=(0,r.Ef)(d);N.use(B.Ay,{timeout:3e3,position:"top-right"}),R.beforeEach(((e,t,n)=>{if(e.matched.some((e=>e.meta.requiresAuth))){const e=localStorage.getItem("token");if(!e)return n({name:"login"})}n()})),N.use(R),N.mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],a=e[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,s=r[0],i=r[1],l=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var d=l(n)}for(t&&t(r);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self["webpackChunkevent_management_frontend"]=self["webpackChunkevent_management_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(6983)}));r=n.O(r)})();
//# sourceMappingURL=app.2a52c674.js.map